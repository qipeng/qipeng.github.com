<html lang="en"><head><meta charset="utf-8"><!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame Remove this if you use the .htaccess --><meta http-equiv="X-UA-Compatible" content=""><meta http-equiv="Content-Type" content="text/html; charset=utf8" /><meta name="robots" content="all" /><meta name="googlebot" content="all" /><title>Tutorial 1&#58; The Fancy Corner</title><meta name="description" content="The first tutorial of the template. "><meta name="keywords" content=""><meta name="author" content="Peng Qi"><!-- Mobile viewport optimized: j.mp/bplateviewport --><meta name="viewport" content=""><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/media/css/site.css" type="text/css"><link rel="stylesheet" href="/media/css/syntax.css" type="text/css"><link rel="stylesheet" href="/media/js/fancybox/jquery.fancybox-1.3.4.css" type="text/css"><link rel="stylesheet" href="/media/css/syntaxhighlighter/shCoreEclipse.css" type="text/css"><link rel="stylesheet" href="/media/css/syntaxhighlighter/shThemeEclipse.css" type="text/css"><!-- All JavaScript at the bottom, except for Modernizr which enables HTML5 elements & feature detects --><script type="text/javascript" src="/media/js/libs/modernizr-1.7.min.js"></script></head><body id="tutorial-1"><div id="container"><div id="main" role="main"><header class="banner clearfix"><h1>Peng Qi</h1><nav class="main_nav"><ul><li><a title="Home Page" class="button home" href="/index.html"> Home </a></li><li><a title="Research" class="button research" href="/research"> Research </a></li><li><a title="Blog" class="button active blog" href="/blog"> Blog </a></li><li><a title="Software" class="button software" href="/software"> Software </a></li><li><a title="Misc" class="button misc" href="/misc"> Me &amp; My ... </a></li></ul></nav><div id="googletranslate" style="position:absolute;right:20px;bottom:5px"></div></header><div class="content-back"><div class="green-vline"></div><div class="content-right"><div class="right-float"><span class="lighter" >Tags:</span><br/><ul class="tags clear"><li><a class="small" href="/blog/tags/tutorial.html"> tutorial </a></li><li><a class="small" href="/blog/tags/html_css.html"> html_css </a></li></ul></div><div class="right-float"><div id="sociallinks" style="font-size:10px;"></div></div></div><div class="contentwrapper"><section class="content"><article class="post"><a href="/blog">Blog</a> &nbsp;&gt;&nbsp; Tutorial 1&#58; The Fancy Corner<br/><nav class="postnav before"> Previous: <a href="/blog/compiling-qslim-21.html">Compiling QSlim 2.1 under Windows / Visual Studio</a><br/> Next: <a href="/blog/hello-world.html">Hello, World!</a></nav><div class="title"><h1 > Tutorial 1&#58; The Fancy Corner </h1></div><time datetime="2012-03-31"> Posted: Sat, 31 Mar 2012 </time><div class="postcontent"><p><link rel="stylesheet" href="/media/css/syntaxhighlighter/shCoreEclipse.css" type="text/css"><link rel="stylesheet" href="/media/css/syntaxhighlighter/shThemeEclipse.css" type="text/css"></p><script type="text/javascript" src="/media/js/syntaxhighlighter/shCore.js"></script><script type="text/javascript" src="/media/js/syntaxhighlighter/shBrushJScript.js"></script><script type="text/javascript" src="/media/js/syntaxhighlighter/shBrushCss.js"></script><script type="text/javascript" src="/media/js/syntaxhighlighter/shBrushXml.js"></script><script type="text/javascript">SyntaxHighlighter.all()</script><p> The &#8220;<img src="/media/images/fancycorner.png">&#8220;, or as I call it &#8212; the &#8220;fancy corner&#8221;, is a special mark used on this site to mark out images that can be viewed in a larger version with a pop-up window. This blog will explain how this functionality is made possible with <a href="http://fancybox.net/" target="_blank">FancyBox</a> and <a href="http://jquery.com/" target="_blank">jQuery</a>.</p><p> Before starting the &#8220;tutorial&#8221;, I&#8217;d like to thank <a href="http://qiankanglai.github.com" target="_blank"> Kanglai Qian</a> who is a brilliant programmer and as well my good friend, for sharing thoughts and awesome plugins when I was developing this template. Many hyde problems will be much more painstaking without his help and his hyde source code. We&#8217;ve also collaborated in a number of projects, which can be found at&nbsp;GitHub. </p><p> Besides, I&#8217;d like to take time to explain the word &#8220;tutorial&#8221;. In fact, what I mean by tutorial is more of some summary, where I summarize the problems I encountered and tricks I used to solve them. I&#8217;d like to share with you all the tricks that I used, and all possible modifications of this template to <a href="/misc/homepage.html">make it yours</a>, especially for people who are not that familiar with <span class="caps">HTML</span>/<span class="caps">CSS</span> and hyde/<a href="https://www.djangoproject.com/" target="_blank">Django</a>/Python like&nbsp;myself. </p><p> Let&#8217;s get to business. The problem of fancy corner is actually threefold: (a) how to get FancyBox to work, (b) how to attach the fancy corner (or any other indicators you like) on an image equipped with FancyBox, and (c) how to do this easily for all images without changing the <span class="caps">HTML</span> source code. For the first problem, the best suggestion I can offer is visiting <a href="http://fancybox.net/" target="_blank">FancyBox&#8217;s official site</a> and find out yourself. Hence, let&#8217;s skip this problem and focus on the remaining&nbsp;two. </p><p> Formally speaking, attaching the fancy corner to the image is a problem where we seek to locate the fancy corner image at exactly the top right corner of the given image. After a wild search on the Internet, I found out a solution for similar problems: locate the close button image for a pop-up window layer. The solution is astonishingly simple, in fact: <pre class="brush: css"> #outer { position:relative; } #inner { position:absolute; right:10px; top:10px; } </pre><pre class="brush: html"> &lt;div id="outer"&gt; say something about your pop-up window. &lt;div id="inner"&gt; put your closing button here &lt;/div&gt; &lt;/div&gt; </pre> As long as the parent position is relative and the child position is absolute, the &#8220;left right top bottom&#8221; attributes of the child element is relative to the borders of the parent&nbsp;element. </p><p> So is that it? We add an inner <code>&lt;div&gt;</code> inside the <code>&lt;a&gt;</code> tag of FancyBox after the <code>&lt;img&gt;</code>, set <code>&lt;a&gt;</code>&#8216;s position to relative and our <code>&lt;div&gt;</code>&#8216;s position to absolute, arrange top and right to 0, and now we have a beautiful fancy corner? Yes, and no. Yes, now you have the appearance where the image has a fancy corner on the top right corner&#8230; But it&#8217;s probably not the top right corner of the image exactly. You&#8217;ll have to remove the <code>&lt;a&gt;</code> tag from the document flow to automatically adjust its width for the fancy corner to locate properly. Adding &#8220;float:left&#8221; will do that. However, this will cause damage to the overall format. Thus, an encompassing <code>&lt;div&gt;</code> would be needed to put it back into the document flow, with the style&nbsp;&#8220;overflow:hidden&#8221;. </p><p> What&#8217;s left is: we need to automatically add this &#8220;style&#8221; to all FancyBox images. Thanks to jQuery, which has powerful <span class="caps">DOM</span> selector and <span class="caps">DOM</span> manipulation functions, this task is just a piece of cake. I&#8217;ll not be able to explain all about jQuery, so it&#8217;s better if you just <a href="http://jquery.com/" target="_blank">visit its site</a>. Here&#8217;s my implementation in &#8220;site.css&#8221; and &#8220;main.js&#8221;: <pre class="brush:css"> .fancyimg { position:relative; margin:0px 10px; width:auto; overflow:hidden; float:left; } </pre><pre class="brush: js"> function loadimg(){ // FancyBox set-up $("a.fancyimg").fancybox({ 'width': '75%', 'height': '75%', 'overlayShow': false, 'transitionIn': 'fade', 'transitionOut': 'fade', 'titlePosition': 'inside', 'overlayColor': '#000', 'overlayOpacity': 0.9}); // Attach fancy corner // I attached my fancy corner as a &lt;div&gt; tag. $("a.fancyimg img").after('&lt;div style="display:block;width:16px;height:16px; position:absolute; top:0px; right:0px; background:url(\'/media/images/fancycorner.png\') no-repeat; _background:none; _filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=noscale, src=\'/media/images/fancycorner.png\');"&gt; &lt;/div&gt;'); // Wrap the outter &lt;div&gt; $("a.fancyimg").wrap("&lt;div style='overflow:hidden;' /&gt;"); } </pre></p><p> Enjoy! </p></div><nav class="postnav after"> Previous: <a href="/blog/compiling-qslim-21.html">Compiling QSlim 2.1 under Windows / Visual Studio</a><br/> Next: <a href="/blog/hello-world.html">Hello, World!</a></nav><div id="disqus_thread"></div><script type="text/javascript"> /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */ var disqus_shortname = 'pengqishomepage'; // required: replace example with your forum shortname /* * * DON'T EDIT BELOW THIS LINE * * */ (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a></article></section></div></div></div></div><!--! end of #container --><footer><div id="designlogo"><a href="http://qipeng.github.com/misc/homepage.html" target="_blank"><span style="color:#11bb22;">Designed</span>by<br><span style="padding-left:40px">Qi<span style="color:#11bb22;">Peng</span></span></a><br><span style="font-size:10px;text-align:center;">Powered by <a href="http://hyde.github.com/" target="_blank" class="hyde">hyde</a>.</span></div><p style="text-align:center">&copy; <a href="http://qipeng.github.com/">Peng Qi</a>, 2012. Hosted by <a href="http://www.github.com">GitHub</a>.</p></footer><!-- Javascript at the bottom for fast page loading --><!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if necessary --><script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script><script>window.jQuery || document.write('<script src="/media/js/libs/jquery-1.7.2.min.js">\x3C/script>')</script><script type="text/javascript" src="/media/js/fancybox/jquery.fancybox-1.3.4.js"></script><script type="text/javascript" src="/media/js/main.js"></script><script type="text/javascript">$(function(){loadimg();loadgoogletranslate();loadsociallinks();})</script><script type="text/javascript" src="/media/js/syntaxhighlighter/shCore.js"></script><script type="text/javascript" src="/media/js/syntaxhighlighter/shBrushJScript.js"></script><script type="text/javascript" src="/media/js/syntaxhighlighter/shBrushCss.js"></script><script type="text/javascript" src="/media/js/syntaxhighlighter/shBrushXml.js"></script><script type="text/javascript">SyntaxHighlighter.all()</script><!--[if lt IE 7 ]><script src="/media/js/libs/dd_belatedpng.js"></script><script>DD_belatedPNG.fix('img, .png_bg'); // Fix any <img> or .png_bg bg-images. Also, please read goo.gl/mZiyb </script><![endif]--><script> var _gaq = [['_setAccount', 'UA-26770326-1'], ['_trackPageview']]; (function(d, t) { var g = d.createElement(t), s = d.getElementsByTagName(t)[0]; g.async = true; g.src = ('https:' == location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; s.parentNode.insertBefore(g, s); })(document, 'script'); </script></body></html> 
