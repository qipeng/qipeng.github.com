<!DOCTYPE html>
<html lang="en" class="yui3-js-enabled" itemscope itemtype="http://schema.org/Thing">
<head>
   <meta charset="utf-8">

  <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
       Remove this if you use the .htaccess -->
  <meta http-equiv="X-UA-Compatible" content="">
  <meta http-equiv="Content-Type" content="text/html; charset=utf8" />
  <meta name="robots" content="all" />
  <meta name="googlebot" content="all" />

  <title>Notes on Matlab Parallel Programming</title>
  <meta name="description" content="Some notes that I accumulated while using Matlab parallel programming
">
  <meta name="keywords" content="">
  <meta name="author" content="Peng Qi">

  <!--  Mobile viewport optimized: j.mp/bplateviewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.4.2/pure.css">
  <link rel="stylesheet" href="/media/css/syntax.css" type="text/css">
  <link rel="stylesheet" href="/media/js/fancybox/jquery.fancybox.css" type="text/css">
  <link rel="stylesheet" href="/media/css/main-grid.css" type="text/css">
  <!--[if lte IE 8]>
  
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure//grids-responsive-old-ie.css">
  
<![endif]-->
<!--[if gt IE 8]><!-->
  
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure//grids-responsive.css">
  
<!--<![endif]-->
<!--[if lte IE 8]>
      <link rel="stylesheet" href="/media/css/layouts/marketing-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
      <link rel="stylesheet" href="/media/css/layouts/marketing.css">
  <!--<![endif]-->
  <script type="text/javascript" src="/media/js/main.js"></script>
   
  
  <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
    <script src="media/js/html5shiv.js"></script>
  <![endif]-->

    <!-- Fav and touch icons -->
  <link rel="shortcut icon" href="favicon.ico">
      
        <link rel="stylesheet" href="/media/css/site.css" type="text/css">
</head>

<body>

<div class="header">
    <div class="home-menu pure-menu pure-menu-open pure-menu-horizontal pure-menu-fixed">
        <a class="pure-menu-heading" href="/index.html">Peng Qi</a>

                <ul class="nav">
                <li class="nav-item ">
            <a title="Research"
                class="research"
                href="/research">
                Research
            </a>
        </li>        <li class="nav-item pure-menu-selected">
            <a title="Blog"
                class="active blog"
                href="/blog">
                Blog
            </a>
        </li>        <li class="nav-item ">
            <a title="Software"
                class="software"
                href="/software">
                Software
            </a>
        </li>        <li class="nav-item ">
            <a title="Misc"
                class="misc"
                href="/misc">
                Me &amp; My ...
            </a>
        </li>    </ul>
    </div>
</div>

<div id="layout" class="pure-g">

    <div class="content pure-u-1 pure-u-med-3-4">
        <div>
            <!-- A wrapper for all the blog posts -->
            <div class="posts">
                        <section>
            <article class="post">

<div class="title"><h1 itemprop="name">
    Notes on Matlab Parallel Programming
</h1></div>
<time datetime="2012-08-22">
    Wed, 22 Aug 2012
</time>

<div>

<ul class="tags clear">
<li><span class="lighter" >Tags</span></li>
<li>
    <a class="tag pure-button" href="/blog/tags/Matlab.html">
        Matlab
    </a>
</li>
<li>
    <a class="tag pure-button" href="/blog/tags/parallel.html">
        parallel
    </a>
</li>
<li>
    <a class="tag pure-button" href="/blog/tags/programming.html">
        programming
    </a>
</li>
</ul>
</div>

<div class="postcontent">
<p>
Recently, I am doing research which involve extensive computation with Matlab. 
Luckily, most of this computation can be done in a parallel fashion, and this can
be instantly accomplished with the Matlab parallel toolbox. During using this
toolbox, I summarized some notes that need to be remembered, to accelerate future&nbsp;work.</p>

<p class='lighter'>
This post will be constantly updated during my use of Matlab parallel programming.
Update log:
<ul class='news'>
<li>
Aug. 22, 2012 - matlabpool,&nbsp;parfor
</li>
</ul>
</p>

<div class='title'><h3>matlabpool</h3></div>

<p>
<span class="code">matlabpool</span> command is essential if you want to use the Matlab parallel programming
features. It opens several workers (several Matlab processes), and uses the current
Matlab process as the coordinator to run parallel jobs. The structure is a star-shape,
where the current process is the &#8220;supervisor&#8221; of the workers it manages. 
<a href="#ref1">[1]</a>
</p>

<p>
To use the command, simply typing <span class='code'>matlabpool</span> or 
<span class='code'>matlabpool open</span> will do the job. This uses the default
configuration named &#8220;local&#8221;, which deploys <i>n</i> workers on the local
computer, where <i>n</i> is the number of cores of your&nbsp;<span class="caps">CPU</span>.
</p>

<p>
Always remember to close your workers before exiting Matlab. In my experience, if
you do not close them, the processes will be killed, but the task remains. To close
the Matlab pool, type <span class='code'>matlabpool close</span> or <span class='code'>
matlabpool close force</span>. The latter is *strongly recommended* in case of
accidentally unfinished or user-breaked tasks. If you do not free previous tasks in the 
Matlab pool, the performance of the current task will be affected, even if you&#8217;ve 
already exited Matlab once without closing the&nbsp;pool.
</p>

<p>
So, in my experience, it is recommended to always use:
<pre class='codebox brush: matlab'>
matlabpool close force;
matlabpool open;
</pre>
if you want to work with Matlab paralell programming efficiently (and&nbsp;locally).
</p>

<p>
The implementation of <span class='node'>matlabpool</span> involves network communication, serialization and
deserialization, offering the possibility of using configurations other than &#8220;local&#8221;
to work on remote or even multiple remote computers. I&#8217;ll cover that when it&#8217;s time for 
me to use one,&nbsp;perhaps.
</p>

<div class='title'><h3>parfor</h3></div>

<p>

The Matlab paralell <span class="caps">FOR</span>-loop is perhaps its most common and easy-to-use paralell feature.
To write a <span class='code'>parfor</span> loop, simply rewrite a <span class='code'>for</span>
loop which has a loop variable that is a *integral and consecutive row vector*. More hint
can be found in Matlab&#8217;s help documents <a href="#ref2">[2]</a> and <a href="#ref3">[3]</a>.

</p>

<p>
One hint that I think important is: always keep your I/O variables <span class="caps">SLICED</span> where possible,
or the communication overhead may be efficiency&nbsp;killer.
</p>

<div class='title'><h3>References</h3></div>

<ul class='news'>
<li>[1] <a href='http://www.mathworks.cn/help/toolbox/distcomp/matlabpool.html'  
target='_blank' name='ref1'>http://www.mathworks.cn/help/toolbox/distcomp/matlabpool.html</a></li>
<li>[2] <a href='http://www.mathworks.cn/help/toolbox/distcomp/parfor.html'  
target='_blank' name='ref2'>http://www.mathworks.cn/help/toolbox/distcomp/parfor.html</a></li>
<li>[3] <a href='http://www.mathworks.cn/help/toolbox/distcomp/brdqtjj-1.html'  
target='_blank' name='ref3'>http://www.mathworks.cn/help/toolbox/distcomp/brdqtjj-1.html</a></li>
</ul></div>

<div style="float:left"><span class="lighter">Older Post</span>&nbsp;
<a href="/blog/putty-bat.html">Shortcut batch files that works with Putty</a>
</div>

<div style="float:right"><span class="lighter">Newer Post</span>&nbsp;
<a href="/blog/tutorial-2.html">Tutorial 2&#58; The hyde Template Files</a>
</div>
<br>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'pengqishomepage'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</article>            </section>
                        <div class="footer">
                <div id="sociallinks" class="clear" style="font-size:10px;"></div>
                <div class="pure-menu pure-menu-horizontal pure-menu-open">
                    <ul>
                        <li><a href="http://purecss.io/">Copyright &copy; Peng Qi, 2017</a></li>
                        <li><a href="http://github.com/qipeng/">GitHub</a></li>
                        <li><a href="http://www.linkedin.com/pub/peng-qi/90/800/395/">LinkedIn</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
<script>
window.jQuery || document.write("<script src=\"/media/js/jquery.min.js\"><\/script>")
</script>
<script type="text/javascript" src="/media/js/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">$(function(){loadsociallinks();loadimg();});</script>

<script src="http://yui.yahooapis.com/3.14.1/build/yui/yui.js"></script>
<script>
YUI().use('node-base', 'node-event-delegate', function (Y) {
    // This just makes sure that the href="#" attached to the <a> elements
    // don't scroll you back up the page.
    Y.one('body').delegate('click', function (e) {
        e.preventDefault();
    }, 'a[href="#"]');
});
</script>


</div>

  <!-- Javascript at the bottom for fast page loading -->

  
  <!--[if lt IE 7 ]>
    <script src="/media/js/libs/dd_belatedpng.js"></script>
    <script>DD_belatedPNG.fix('img, .png_bg'); // Fix any <img> or .png_bg bg-images. Also, please read goo.gl/mZiyb </script>
  <![endif]--><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-26770326-1', 'qipeng.me');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>

  
</body>
</html>