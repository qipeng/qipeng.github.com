<html lang="en"><head><meta charset="utf-8"><!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame Remove this if you use the .htaccess --><meta http-equiv="X-UA-Compatible" content=""><meta http-equiv="Content-Type" content="text/html; charset=utf8" /><meta name="robots" content="all" /><meta name="googlebot" content="all" /><title>Notes on Matlab Parallel Programming</title><meta name="description" content="Some notes that I accumulated while using Matlab parallel programming "><meta name="keywords" content=""><meta name="author" content="Peng Qi"><!-- Mobile viewport optimized: j.mp/bplateviewport --><meta name="viewport" content=""><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/media/css/site.css" type="text/css"><link rel="stylesheet" href="/media/css/syntax.css" type="text/css"><link rel="stylesheet" href="/media/js/fancybox/jquery.fancybox-1.3.4.css" type="text/css"><!-- All JavaScript at the bottom, except for Modernizr which enables HTML5 elements & feature detects --><script type="text/javascript" src="/media/js/libs/modernizr-1.7.min.js"></script></head><body id="matlab-parallel"><div id="container"><div id="main" role="main"><header class="banner clearfix"><h1>Peng Qi</h1><nav class="main_nav"><ul><li><a title="Home Page" class="button home" href="/index.html"> Home </a></li><li><a title="Research" class="button research" href="/research"> Research </a></li><li><a title="Blog" class="button active blog" href="/blog"> Blog </a></li><li><a title="Software" class="button software" href="/software"> Software </a></li><li><a title="Misc" class="button misc" href="/misc"> Me &amp; My ... </a></li></ul></nav><div id="googletranslate" style="position:absolute;right:20px;bottom:5px"></div></header><div class="content-back"><div class="green-vline"></div><div class="content-right"><div class="right-float"><span class="lighter" style="font-size:14px;">Tags:</span><br/><ul class="tags clear"><li><a class="small" href="/blog/tags/Matlab.html"> Matlab </a></li><li><a class="small" href="/blog/tags/parallel.html"> parallel </a></li><li><a class="small" href="/blog/tags/programming.html"> programming </a></li></ul></div><div class="right-float"><div id="sociallinks" style="font-size:10px;"></div></div></div><div class="contentwrapper"><section class="content"><article class="post"><a href="/blog">Blog</a> &nbsp;&gt;&nbsp; Notes on Matlab Parallel Programming<br/><nav class="postnav before"> Previous: <a href="/blog/putty-bat.html">Shortcut batch files that works with Putty</a><br/> Next: <a href="/blog/tutorial-2.html">Tutorial 2&#58; The hyde Template Files</a></nav><div class="title"><h1 > Notes on Matlab Parallel Programming </h1></div><time datetime="2012-08-22"> Posted: Wed, 22 Aug 2012 </time><div class="postcontent"><p> Recently, I am doing research which involve extensive computation with Matlab. Luckily, most of this computation can be done in a parallel fashion, and this can be instantly accomplished with the Matlab parallel toolbox. During using this toolbox, I summarized some notes that need to be remembered, to accelerate future&nbsp;work.</p><p class='lighter'> This post will be constantly updated during my use of Matlab parallel programming. Update log: <ul class='news'><li> Aug. 22, 2012 - matlabpool,&nbsp;parfor </li></ul></p><div class='title'><h2>matlabpool</h2></div><p><span class="code">matlabpool</span> command is essential if you want to use the Matlab parallel programming features. It opens several workers (several Matlab processes), and uses the current Matlab process as the coordinator to run parallel jobs. The structure is a star-shape, where the current process is the &#8220;supervisor&#8221; of the workers it manages. <a href="#ref1">[1]</a></p><p> To use the command, simply typing <span class='code'>matlabpool</span> or <span class='code'>matlabpool open</span> will do the job. This uses the default configuration named &#8220;local&#8221;, which deploys <i>n</i> workers on the local computer, where <i>n</i> is the number of cores of your&nbsp;<span class="caps">CPU</span>. </p><p> Always remember to close your workers before exiting Matlab. In my experience, if you do not close them, the processes will be killed, but the task remains. To close the Matlab pool, type <span class='code'>matlabpool close</span> or <span class='code'> matlabpool close force</span>. The latter is *strongly recommended* in case of accidentally unfinished or user-breaked tasks. If you do not free previous tasks in the Matlab pool, the performance of the current task will be affected, even if you&#8217;ve already exited Matlab once without closing the&nbsp;pool. </p><p> So, in my experience, it is recommended to always use: <pre class='codebox brush: matlab'> matlabpool close force; matlabpool open; </pre> if you want to work with Matlab paralell programming efficiently (and&nbsp;locally). </p><p> The implementation of <span class='node'>matlabpool</span> involves network communication, serialization and deserialization, offering the possibility of using configurations other than &#8220;local&#8221; to work on remote or even multiple remote computers. I&#8217;ll cover that when it&#8217;s time for me to use one,&nbsp;perhaps. </p><div class='title'><h2>parfor</h2></div><p> The Matlab paralell <span class="caps">FOR</span>-loop is perhaps its most common and easy-to-use paralell feature. To write a <span class='code'>parfor</span> loop, simply rewrite a <span class='code'>for</span> loop which has a loop variable that is a *integral and consecutive row vector*. More hint can be found in Matlab&#8217;s help documents <a href="#ref2">[2]</a> and <a href="#ref3">[3]</a>. </p><p> One hint that I think important is: always keep your I/O variables <span class="caps">SLICED</span> where possible, or the communication overhead may be efficiency&nbsp;killer. </p><div class='title'><h2>References</h2></div><ul class='news'><li>[1] <a href='http://www.mathworks.cn/help/toolbox/distcomp/matlabpool.html' target='_blank' name='ref1'>http://www.mathworks.cn/help/toolbox/distcomp/matlabpool.html</a></li><li>[2] <a href='http://www.mathworks.cn/help/toolbox/distcomp/parfor.html' target='_blank' name='ref2'>http://www.mathworks.cn/help/toolbox/distcomp/parfor.html</a></li><li>[3] <a href='http://www.mathworks.cn/help/toolbox/distcomp/brdqtjj-1.html' target='_blank' name='ref3'>http://www.mathworks.cn/help/toolbox/distcomp/brdqtjj-1.html</a></li></ul></div><nav class="postnav after"> Previous: <a href="/blog/putty-bat.html">Shortcut batch files that works with Putty</a><br/> Next: <a href="/blog/tutorial-2.html">Tutorial 2&#58; The hyde Template Files</a></nav><div id="disqus_thread"></div><script type="text/javascript"> /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */ var disqus_shortname = 'pengqishomepage'; // required: replace example with your forum shortname /* * * DON'T EDIT BELOW THIS LINE * * */ (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a></article></section></div></div></div></div><!--! end of #container --><footer><div id="designlogo"><a href="http://qipeng.github.com/misc/homepage.html" target="_blank"><span style="color:#11bb22;">Designed</span>by<br><span style="padding-left:40px">Qi<span style="color:#11bb22;">Peng</span></span></a><br><span style="font-size:10px;text-align:center;">Powered by <a href="http://hyde.github.com/" target="_blank" class="hyde">hyde</a>.</span></div><p style="text-align:center">&copy; <a href="http://qipeng.github.com/">Peng Qi</a>, 2012. Hosted by <a href="http://www.github.com">GitHub</a>.</p></footer><!-- Javascript at the bottom for fast page loading --><!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if necessary --><script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script><script>window.jQuery || document.write('<script src="/media/js/libs/jquery-1.7.2.min.js">\x3C/script>')</script><script type="text/javascript" src="/media/js/fancybox/jquery.fancybox-1.3.4.js"></script><script type="text/javascript" src="/media/js/main.js"></script><script type="text/javascript">$(function(){loadimg();loadgoogletranslate();loadsociallinks();})</script><!--[if lt IE 7 ]><script src="/media/js/libs/dd_belatedpng.js"></script><script>DD_belatedPNG.fix('img, .png_bg'); // Fix any <img> or .png_bg bg-images. Also, please read goo.gl/mZiyb </script><![endif]--><script> var _gaq = [['_setAccount', 'UA-26770326-1'], ['_trackPageview']]; (function(d, t) { var g = d.createElement(t), s = d.getElementsByTagName(t)[0]; g.async = true; g.src = ('https:' == location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; s.parentNode.insertBefore(g, s); })(document, 'script'); </script></body></html> 
