﻿<html lang="en">
<head>
    <meta charset="">

  <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
       Remove this if you use the .htaccess -->
  <meta http-equiv="X-UA-Compatible" content="">

  <!-- encoding must be specified within the first 512 bytes
        www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#charset -->

  <!-- meta element for compatibility mode needs to be before
        all elements except title & meta
        msdn.microsoft.com/en-us/library/cc288325(VS.85).aspx -->
  <!-- Chrome Frame is only invoked if meta element for
        compatibility mode is within the first 1K bytes
        code.google.com/p/chromium/issues/detail?id=23003 -->

  <title>ConvolutionalRBM.m</title>
  <meta name="description" content="A Matlab / MEX / CUDA-MEX implementation of Convolutional Restricted Boltzmann Machine (RBM).
">
  <meta name="author" content="Peng Qi">

  <!--  Mobile viewport optimized: j.mp/bplateviewport -->
  <meta name="viewport" content="">

    <link rel="shortcut icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/media/css/site.css" type="text/css">
  <link rel="stylesheet" href="/media/css/syntax.css" type="text/css">
  <link rel="stylesheet" href="/media/js/fancybox/jquery.fancybox-1.3.4.css" type="text/css">
      <!-- All JavaScript at the bottom, except for Modernizr which
        enables HTML5 elements & feature detects -->
    <script type="text/javascript" src="/media/js/libs/modernizr-1.7.min.js"></script>
    </head>
<body id="convolutional-rbm">
    <div id="container">
            <div id="main" role="main">
          <header class="banner clearfix">
          <h1>Peng Qi</h1>                              <nav class="main_nav">
    <ul>
                <li>
            <a title="Home Page"
                class="button home"
                href="/index.html">
                Home
            </a>
        </li>        <li>
            <a title="Research"
                class="button research"
                href="/research">
                Research
            </a>
        </li>        <li>
            <a title="Blog"
                class="button blog"
                href="/blog">
                Blog
            </a>
        </li>        <li>
            <a title="Software"
                class="button active software"
                href="/software">
                Software
            </a>
        </li>        <li>
            <a title="Misc"
                class="button misc"
                href="/misc">
                Me &amp; My ...
            </a>
        </li>    </ul>
</nav>
                    <div id="googletranslate" style="position:absolute;right:20px;bottom:5px"></div>
          </header>
          <div class="content-back">
          <div class="green-vline"></div>
          <div class="content-right">
                    <div class="right-float"><div id="sociallinks" style="font-size:10px;">
          </div></div>
          </div>
          <div class="contentwrapper">
          <section class="content">
          <article class="post">

<a href="/software">Software</a> &nbsp;&gt;&nbsp; ConvolutionalRBM.m<br/>
<nav class="postnav before">
Previous:
<a href="/software/misc.html">Miscellaneous</a>
<br/>

Next:
<a href="/software/tsinghua-classroom.html">Tsinghua Classroom</a>
</nav>

<div class="title"><h1>
    ConvolutionalRBM.m
</h1></div>

<div class="postcontent">
<p>
When I was doing research on deep learning structures, I was amazed by convolutional <span class="caps">RBM</span> when I read about it because it possess the amazing capability of learning object parts and &#8220;recovering&#8221; missing parts (see <a href="#reference">Reference</a>). Although <a href="http://www.cs.utoronto.ca/~kriz/" target="_blank">Alex Krizhevsky</a> has an implementation of such network in pure <span class="caps">CUDA</span>, I think some (like myself) might want to use a more friendly Matlab version to process smaller amount of data with a bit more time-consumption &#8211; so here we&nbsp;are.</p>

<div class="title"><h2>Status</h2></div>

<p>
<table>
<tr><td><span class="lighter">Current Version</span></td><td>0.1 alpha</td></tr>
<tr><td><span class="lighter">Important Note</span></td><td>This code is <span class="lighter">not</span> an official release by the authors and may contain defect resulting in erroneous outcome. Please use with caution and all possible losses is at the user&#8217;s own risk. For research / personal purposes only and should be kept public with this note. Feedbacks welcome below this post, and also in the <a href="https://github.com/qipeng/convolutionalRBM.m" target="_blank">project homepage</a>.</td></tr>
<tr><td><span class="lighter">Source code</span></td><td>Available at the <a href="https://github.com/qipeng/convolutionalRBM.m" target="_blank">project homepage</a></td></tr>
<tr><td><span class="lighter">Coding status</span></td><td>Under heavy development</a></td></tr>
<tr><td><span class="lighter">Update Log</span></td><td>
<table>
<tr><td><span class="lighter">Oct 17, 2012: 0.1 alpha</span></td><td>Basic functionalities</td></tr>
</table>
</td></tr>
</table>
</p>

<div class="title"><h2>Experimental&nbsp;Results</h2></div>

<p>
Coming&nbsp;soon&#8230;
</p>

<div class="title"><h2>FAQs <span class="amp">&amp;</span>&nbsp;Remarks</h2></div>

<p>
<ul class="news">
<li><span class="lighter">I can&#8217;t run the code. Functions not exist?</span><br>To run this code properly, you should set up your mex first, then compile the <span class="caps">CPU</span> mex files with mex command (which are &#8220;mex/convdmex.cpp&#8221;, &#8220;mex/convumex.cpp&#8221;, and&nbsp;&#8220;mex/mfInfer.cpp&#8221;).</li>
<li><span class="lighter">How to use your <span class="caps">CUDA</span>-<span class="caps">MEX</span>?</span><br>See <a href="http://www.cs.ucf.edu/~janaka/gpu/using_nvmex.htm" target="_blank">A Guide to Using <span class="caps">NVMEX</span> Tool</a>. I&#8217;ve modified the nvmexopts.bat file a bit to link the <span class="caps">CUDA</span> libs. Typically &#8220;nvmex -f nvmexopts.bat mex/convd_cuda.cu&#8221; would work to compile the corresponding <span class="caps">CUDA</span>-<span class="caps">MEX</span>&nbsp;file.</li>
<li><span class="lighter">How fast can this code run?</span><br>I can&#8217;t say it runs fast: after all the current (0.1 alpha) backbone code is still implemented in Matlab. But with mex implementation, it&#8217;s about 5x faster than a pure Matlab implememtation. However since <span class="caps">CUDA</span>-<span class="caps">MEX</span> is not quite taken advantage of, the current version (0.1 alpha) using <span class="caps">CUDA</span>-<span class="caps">MEX</span> runs about 3x slower on my laptop, than the <span class="caps">MEX</span>&nbsp;version.</li>
<li><span class="lighter">I found a bug. Where do I report to?</span><br>Both commenting below this post and adding an issue at the <a href="https://github.com/qipeng/convolutionalRBM.m" target="_blank">project homepage</a> will&nbsp;do.</li>
<li><span class="lighter">Future development plans?</span><br>This code is still under heavy development before it&#8217;s usable in real-world applications instead of toy-sized problems. A full <span class="caps">MEX</span> / <span class="caps">CUDA</span>-<span class="caps">MEX</span> implementation is planned. Besides, a gadget script for compiling <span class="caps">MEX</span> / <span class="caps">CUDA</span>-<span class="caps">MEX</span> files, as well as sample data and usage, are&nbsp;considered.</li>
</ul>
</p>

<div class="title"><h2>References</h2></div>

<p>
You may want to cite the following publications when your research uses this code (like I said, this is *not* an official release by the authors so use caution):
<ul class="news">
<li><a href="http://ai.stanford.edu/~ang/papers/icml09-ConvolutionalDeepBeliefNetworks.pdf" target="_blank">Convolutional deep belief networks for scalable unsupervised learning of hierarchical representations</a>, Honglak Lee, Roger Grosse, Rajesh Ranganath and Andrew Y. Ng. In Proceedings of the Twenty-Sixth International Conference on Machine Learning,&nbsp;2009. </li>
</ul>
</p></div>

<nav class="postnav after">
Previous:
<a href="/software/misc.html">Miscellaneous</a>
<br/>

Next:
<a href="/software/tsinghua-classroom.html">Tsinghua Classroom</a>
</nav>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'pengqishomepage'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</article>          </section>
          </div>
          </div>
      </div>
      </div> <!--! end of #container -->
  <footer>
      <div id="designlogo"><a href="http://qipeng.github.com/misc/homepage.html" target="_blank"><span style="color:#11bb22;">Designed</span>by<br>
    <span style="padding-left:40px">Qi<span style="color:#11bb22;">Peng</span></span></a>
    <br><span style="font-size:10px;text-align:center;">Powered by <a href="http://hyde.github.com/" target="_blank" class="hyde">hyde</a>.</span></div>
      <p style="text-align:center">&copy; <a href="http://qipeng.github.com/">Peng Qi</a>, 2012. Hosted by <a href="http://www.github.com">GitHub</a>.</p>
  </footer>
    
  <link href='http://fonts.googleapis.com/css?family=Poly|Source+Sans+Pro' rel='stylesheet' type='text/css'>
  
    <!-- Javascript at the bottom for fast page loading -->
    <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if necessary -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
  <script>window.jQuery || document.write('<script src="/media/js/libs/jquery-1.7.2.min.js">\x3C/script>')</script>
  
  <script type="text/javascript" src="/media/js/fancybox/jquery.fancybox-1.3.4.js"></script>
  <script type="text/javascript" src="/media/js/main.js"></script>
  <script type="text/javascript">$(function(){loadimg();loadgoogletranslate();loadsociallinks();})</script>
  
  <!--[if lt IE 7 ]>
    <script src="/media/js/libs/dd_belatedpng.js"></script>
    <script>DD_belatedPNG.fix('img, .png_bg'); // Fix any <img> or .png_bg bg-images. Also, please read goo.gl/mZiyb </script>
  <![endif]-->﻿<script>
    var _gaq = [['_setAccount', 'UA-26770326-1'], ['_trackPageview']];
    (function(d, t) {
    var g = d.createElement(t),
        s = d.getElementsByTagName(t)[0];
    g.async = true;
    g.src = ('https:' == location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g, s);
    })(document, 'script');
</script>
  </body>
</html>